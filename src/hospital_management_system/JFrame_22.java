/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package hospital_management_system;

import static hospital_management_system.JFrame_11.jLabel_Date;
import static hospital_management_system.JFrame_11.jLabel_Time;
import static hospital_management_system.JFrame_26.JTextfield_NIC_No;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.HeadlessException;
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import javax.swing.BorderFactory;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.border.Border;
import java.io.File;
import java.io.FileInputStream;
import static java.lang.Thread.sleep;
import java.sql.Connection;
import java.sql.Date;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.filechooser.FileNameExtensionFilter;

/**
 *
 * @author Dinuwan Theekshana
 */
public class JFrame_22 extends javax.swing.JFrame {

    String selectedImagePath = "";

    /**
     * Creates new form JFrame_22
     */
    byte[] Person_Image = null;
    String filename = null;
    JFileChooser chooser = null;
    String myLocation = "D:\\My Works\\My Java Projects\\Hospital_Management_System\\User_Image\\";

    public JFrame_22() {
        initComponents();
        showDate();
        showTime();

        //set the form location in the screen.
        Toolkit toolkit = getToolkit();
        Dimension size = toolkit.getScreenSize();
        setLocation(size.width / 2 - getWidth() / 2, size.height / 2 - getHeight() / 2);

        //Add the border.
        Border JPanel_title__Border = BorderFactory.createMatteBorder(7, 7, 7, 7, Color.black);
        jPanel1.setBorder(JPanel_title__Border);

        // Add border and give colour for the minmize & close buttons.
        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.black);
        jLabel_Close.setBorder(Lable__Border);
        jLabel_Miniimize.setBorder(Lable__Border);

    }
    
    
    //Date and Time

    void showDate() {

        java.util.Date d = new java.util.Date();
        SimpleDateFormat s = new SimpleDateFormat("dd - MM - YYYY");
        jLabel_Date.setText(s.format(d));
    }

    void showTime() {

        new Timer(0, (ActionEvent e) -> {
            java.util.Date d = new java.util.Date();
            SimpleDateFormat s = new SimpleDateFormat("hh - mm - ss a");
            jLabel1_Time.setText(s.format(d));
        }).start();
    }

    

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel17 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        JTextfield_Search_NIC_No = new javax.swing.JTextField();
        jLabel3_Search_icon1 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel_Ico_SHOW_Password = new javax.swing.JLabel();
        jLabel_Ico_SHOW_Retype_Password = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jTextField_Fname = new javax.swing.JTextField();
        jPasswordField_Password = new javax.swing.JPasswordField();
        jLabel6 = new javax.swing.JLabel();
        jPasswordField_Re_Type_Pw = new javax.swing.JPasswordField();
        jLabel7 = new javax.swing.JLabel();
        jTextField_NIC_No = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jTextField_U_Name = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        jTextField_Phone_Number = new javax.swing.JTextField();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jComboBox_Gender = new javax.swing.JComboBox<>();
        jButton_Choose_Img = new javax.swing.JButton();
        jButton_Change = new javax.swing.JButton();
        jLabel_Val_NIC_NO = new javax.swing.JLabel();
        JLabel_Search_Status_text = new javax.swing.JLabel();
        jLabel_Val_Picture = new javax.swing.JLabel();
        jLabel_Val_Retype_Psswd = new javax.swing.JLabel();
        jLabel_Val_Phone_Num = new javax.swing.JLabel();
        jLabel_Val_FName = new javax.swing.JLabel();
        jLabel_Val_DOB = new javax.swing.JLabel();
        jLabel_Val_Gender = new javax.swing.JLabel();
        jLabel_Val_Password = new javax.swing.JLabel();
        jButton_Close = new javax.swing.JButton();
        jLabel_Val_UName1 = new javax.swing.JLabel();
        jButton_Back = new javax.swing.JButton();
        jLabel_Miniimize = new javax.swing.JLabel();
        jLabel_Close = new javax.swing.JLabel();
        jLabel_imge_update_form = new javax.swing.JLabel();
        jLabel1_Time = new javax.swing.JLabel();
        jLabel_Date = new javax.swing.JLabel();
        jButton_Clr1 = new javax.swing.JButton();
        jLabel_Show_Password_dont_Delete = new javax.swing.JLabel();
        jDateChooser_DOB = new com.toedter.calendar.JDateChooser();
        jLabel2 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        JTextfield_NIC_No = new javax.swing.JTextField();
        jLabel3_Search_icon = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Change your account details");
        setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("/Hospital_Management_System/Male-user-edit-icon.png"))
        );
        setUndecorated(true);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 7));
        jPanel1.setLayout(null);

        jLabel17.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel17.setForeground(new java.awt.Color(255, 0, 51));
        jLabel17.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel17.setText("V");
        jPanel1.add(jLabel17);
        jLabel17.setBounds(430, 180, 20, 30);

        jLabel13.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel13.setForeground(new java.awt.Color(255, 0, 51));
        jLabel13.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel13.setText("V");
        jPanel1.add(jLabel13);
        jLabel13.setBounds(410, 260, 20, 30);

        jLabel16.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel16.setText("Search User :");
        jPanel1.add(jLabel16);
        jLabel16.setBounds(40, 170, 140, 30);

        JTextfield_Search_NIC_No.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        JTextfield_Search_NIC_No.setForeground(new java.awt.Color(153, 153, 153));
        JTextfield_Search_NIC_No.setText("search");
        JTextfield_Search_NIC_No.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        JTextfield_Search_NIC_No.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                JTextfield_Search_NIC_NoFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                JTextfield_Search_NIC_NoFocusLost(evt);
            }
        });
        JTextfield_Search_NIC_No.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                JTextfield_Search_NIC_NoKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                JTextfield_Search_NIC_NoKeyTyped(evt);
            }
        });
        jPanel1.add(JTextfield_Search_NIC_No);
        JTextfield_Search_NIC_No.setBounds(230, 180, 220, 30);

        jLabel3_Search_icon1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel3_Search_icon1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/hospital_management_system/Search-icon.png"))); // NOI18N
        jLabel3_Search_icon1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel3_Search_icon1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel3_Search_icon1MouseClicked(evt);
            }
        });
        jPanel1.add(jLabel3_Search_icon1);
        jLabel3_Search_icon1.setBounds(450, 180, 32, 30);

        jLabel5.setFont(new java.awt.Font("Lucida Calligraphy", 1, 24)); // NOI18N
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("Change your account details");
        jPanel1.add(jLabel5);
        jLabel5.setBounds(0, 50, 1130, 50);

        jLabel_Ico_SHOW_Password.setBackground(new java.awt.Color(255, 255, 255));
        jLabel_Ico_SHOW_Password.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel_Ico_SHOW_Password.setIcon(new javax.swing.ImageIcon(getClass().getResource("/hospital_management_system/icons8-eye-32.png"))); // NOI18N
        jLabel_Ico_SHOW_Password.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        jLabel_Ico_SHOW_Password.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel_Ico_SHOW_Password.setOpaque(true);
        jLabel_Ico_SHOW_Password.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_PasswordMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_PasswordMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_PasswordMouseExited(evt);
            }
        });
        jPanel1.add(jLabel_Ico_SHOW_Password);
        jLabel_Ico_SHOW_Password.setBounds(400, 420, 30, 30);

        jLabel_Ico_SHOW_Retype_Password.setBackground(new java.awt.Color(255, 255, 255));
        jLabel_Ico_SHOW_Retype_Password.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel_Ico_SHOW_Retype_Password.setIcon(new javax.swing.ImageIcon(getClass().getResource("/hospital_management_system/icons8-eye-32.png"))); // NOI18N
        jLabel_Ico_SHOW_Retype_Password.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        jLabel_Ico_SHOW_Retype_Password.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel_Ico_SHOW_Retype_Password.setOpaque(true);
        jLabel_Ico_SHOW_Retype_Password.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_Retype_PasswordMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_Retype_PasswordMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jLabel_Ico_SHOW_Retype_PasswordMouseExited(evt);
            }
        });
        jPanel1.add(jLabel_Ico_SHOW_Retype_Password);
        jLabel_Ico_SHOW_Retype_Password.setBounds(400, 500, 30, 30);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel4.setText("Password :");
        jPanel1.add(jLabel4);
        jLabel4.setBounds(40, 420, 99, 22);

        jTextField_Fname.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jTextField_Fname.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField_FnameKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_FnameKeyReleased(evt);
            }
        });
        jPanel1.add(jTextField_Fname);
        jTextField_Fname.setBounds(610, 340, 190, 30);

        jPasswordField_Password.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPasswordField_Password.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jPasswordField_PasswordKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jPasswordField_PasswordKeyReleased(evt);
            }
        });
        jPanel1.add(jPasswordField_Password);
        jPasswordField_Password.setBounds(230, 420, 170, 30);

        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel6.setText("Phone Number :");
        jPanel1.add(jLabel6);
        jLabel6.setBounds(450, 260, 160, 22);

        jPasswordField_Re_Type_Pw.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jPasswordField_Re_Type_Pw.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jPasswordField_Re_Type_PwKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jPasswordField_Re_Type_PwKeyReleased(evt);
            }
        });
        jPanel1.add(jPasswordField_Re_Type_Pw);
        jPasswordField_Re_Type_Pw.setBounds(230, 500, 170, 30);

        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel7.setText("Re - type Password :");
        jPanel1.add(jLabel7);
        jLabel7.setBounds(40, 500, 200, 22);

        jTextField_NIC_No.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jTextField_NIC_No.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField_NIC_NoKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                jTextField_NIC_NoKeyTyped(evt);
            }
        });
        jPanel1.add(jTextField_NIC_No);
        jTextField_NIC_No.setBounds(230, 260, 200, 30);

        jLabel8.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel8.setText("NIC No :");
        jPanel1.add(jLabel8);
        jLabel8.setBounds(40, 260, 80, 22);

        jTextField_U_Name.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jTextField_U_Name.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField_U_NameKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_U_NameKeyReleased(evt);
            }
        });
        jPanel1.add(jTextField_U_Name);
        jTextField_U_Name.setBounds(230, 340, 200, 30);

        jLabel9.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel9.setText("Username :");
        jPanel1.add(jLabel9);
        jLabel9.setBounds(40, 340, 104, 22);

        jTextField_Phone_Number.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jTextField_Phone_Number.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jTextField_Phone_NumberKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jTextField_Phone_NumberKeyReleased(evt);
            }
        });
        jPanel1.add(jTextField_Phone_Number);
        jTextField_Phone_Number.setBounds(610, 260, 190, 30);

        jLabel10.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel10.setText("Full Name :");
        jPanel1.add(jLabel10);
        jLabel10.setBounds(450, 340, 102, 22);

        jLabel11.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel11.setText("Date Of Birth :");
        jPanel1.add(jLabel11);
        jLabel11.setBounds(450, 420, 130, 22);

        jLabel12.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel12.setText("Gender :");
        jPanel1.add(jLabel12);
        jLabel12.setBounds(450, 500, 78, 22);

        jComboBox_Gender.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Select Gender", "Male", "Female" }));
        jComboBox_Gender.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jComboBox_Gender.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jComboBox_GenderMouseClicked(evt);
            }
        });
        jComboBox_Gender.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jComboBox_GenderKeyPressed(evt);
            }
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jComboBox_GenderKeyReleased(evt);
            }
        });
        jPanel1.add(jComboBox_Gender);
        jComboBox_Gender.setBounds(610, 500, 190, 30);

        jButton_Choose_Img.setBackground(new java.awt.Color(0, 84, 140));
        jButton_Choose_Img.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_Choose_Img.setForeground(new java.awt.Color(255, 255, 255));
        jButton_Choose_Img.setText("Choose");
        jButton_Choose_Img.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jButton_Choose_Img.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton_Choose_Img.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_Choose_ImgActionPerformed(evt);
            }
        });
        jPanel1.add(jButton_Choose_Img);
        jButton_Choose_Img.setBounds(980, 590, 120, 40);

        jButton_Change.setBackground(new java.awt.Color(0, 84, 140));
        jButton_Change.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_Change.setForeground(new java.awt.Color(255, 255, 255));
        jButton_Change.setText("Change");
        jButton_Change.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jButton_Change.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton_Change.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_ChangeActionPerformed(evt);
            }
        });
        jPanel1.add(jButton_Change);
        jButton_Change.setBounds(290, 590, 120, 40);

        jLabel_Val_NIC_NO.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_NIC_NO.setForeground(new java.awt.Color(255, 0, 0));
        jLabel_Val_NIC_NO.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jLabel_Val_NIC_NOKeyReleased(evt);
            }
        });
        jPanel1.add(jLabel_Val_NIC_NO);
        jLabel_Val_NIC_NO.setBounds(240, 300, 210, 30);

        JLabel_Search_Status_text.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        JLabel_Search_Status_text.setForeground(new java.awt.Color(204, 0, 0));
        jPanel1.add(JLabel_Search_Status_text);
        JLabel_Search_Status_text.setBounds(230, 220, 240, 30);

        jLabel_Val_Picture.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_Picture.setForeground(new java.awt.Color(255, 0, 0));
        jLabel_Val_Picture.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jLabel_Val_PictureKeyReleased(evt);
            }
        });
        jPanel1.add(jLabel_Val_Picture);
        jLabel_Val_Picture.setBounds(820, 540, 270, 30);

        jLabel_Val_Retype_Psswd.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_Retype_Psswd.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_Retype_Psswd);
        jLabel_Val_Retype_Psswd.setBounds(240, 550, 210, 30);

        jLabel_Val_Phone_Num.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_Phone_Num.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_Phone_Num);
        jLabel_Val_Phone_Num.setBounds(610, 300, 210, 30);

        jLabel_Val_FName.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_FName.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_FName);
        jLabel_Val_FName.setBounds(610, 380, 210, 30);

        jLabel_Val_DOB.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_DOB.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_DOB);
        jLabel_Val_DOB.setBounds(610, 460, 210, 30);

        jLabel_Val_Gender.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_Gender.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_Gender);
        jLabel_Val_Gender.setBounds(610, 550, 210, 30);

        jLabel_Val_Password.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_Password.setForeground(new java.awt.Color(255, 0, 0));
        jPanel1.add(jLabel_Val_Password);
        jLabel_Val_Password.setBounds(240, 460, 210, 30);

        jButton_Close.setBackground(new java.awt.Color(0, 84, 140));
        jButton_Close.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_Close.setForeground(new java.awt.Color(255, 255, 255));
        jButton_Close.setText("Close");
        jButton_Close.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jButton_Close.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton_Close.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_CloseActionPerformed(evt);
            }
        });
        jPanel1.add(jButton_Close);
        jButton_Close.setBounds(760, 590, 120, 40);

        jLabel_Val_UName1.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        jLabel_Val_UName1.setForeground(new java.awt.Color(255, 0, 0));
        jLabel_Val_UName1.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jLabel_Val_UName1KeyReleased(evt);
            }
        });
        jPanel1.add(jLabel_Val_UName1);
        jLabel_Val_UName1.setBounds(240, 380, 210, 30);

        jButton_Back.setBackground(new java.awt.Color(0, 84, 140));
        jButton_Back.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_Back.setForeground(new java.awt.Color(255, 255, 255));
        jButton_Back.setText("<<Back");
        jButton_Back.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jButton_Back.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton_Back.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_BackActionPerformed(evt);
            }
        });
        jPanel1.add(jButton_Back);
        jButton_Back.setBounds(50, 590, 120, 40);

        jLabel_Miniimize.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        jLabel_Miniimize.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel_Miniimize.setText("-");
        jLabel_Miniimize.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel_Miniimize.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel_MiniimizeMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel_MiniimizeMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jLabel_MiniimizeMouseExited(evt);
            }
        });
        jPanel1.add(jLabel_Miniimize);
        jLabel_Miniimize.setBounds(1070, 10, 30, 30);

        jLabel_Close.setFont(new java.awt.Font("Arial", 1, 18)); // NOI18N
        jLabel_Close.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel_Close.setText("X");
        jLabel_Close.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel_Close.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel_CloseMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel_CloseMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jLabel_CloseMouseExited(evt);
            }
        });
        jPanel1.add(jLabel_Close);
        jLabel_Close.setBounds(1100, 10, 30, 30);

        jLabel_imge_update_form.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel_imge_update_form.setForeground(new java.awt.Color(255, 255, 255));
        jLabel_imge_update_form.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel_imge_update_form.setBorder(new javax.swing.border.LineBorder(new java.awt.Color(0, 0, 0), 3, true));
        jLabel_imge_update_form.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel_imge_update_form.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jLabel_imge_update_formMouseClicked(evt);
            }
        });
        jLabel_imge_update_form.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                jLabel_imge_update_formKeyReleased(evt);
            }
        });
        jPanel1.add(jLabel_imge_update_form);
        jLabel_imge_update_form.setBounds(820, 260, 290, 270);

        jLabel1_Time.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel1_Time.setText("Time :-");
        jPanel1.add(jLabel1_Time);
        jLabel1_Time.setBounds(30, 110, 240, 30);

        jLabel_Date.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel_Date.setText("Date :-");
        jPanel1.add(jLabel_Date);
        jLabel_Date.setBounds(860, 130, 230, 29);

        jButton_Clr1.setBackground(new java.awt.Color(0, 84, 140));
        jButton_Clr1.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jButton_Clr1.setForeground(new java.awt.Color(255, 255, 255));
        jButton_Clr1.setText("Clear");
        jButton_Clr1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jButton_Clr1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton_Clr1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton_Clr1ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton_Clr1);
        jButton_Clr1.setBounds(530, 590, 120, 40);

        jLabel_Show_Password_dont_Delete.setText("jLabel3");
        jPanel1.add(jLabel_Show_Password_dont_Delete);
        jLabel_Show_Password_dont_Delete.setBounds(50, 330, 0, 16);

        jDateChooser_DOB.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        jDateChooser_DOB.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jDateChooser_DOBMouseClicked(evt);
            }
        });
        jDateChooser_DOB.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                jDateChooser_DOBKeyPressed(evt);
            }
        });
        jPanel1.add(jDateChooser_DOB);
        jDateChooser_DOB.setBounds(610, 420, 190, 30);

        jLabel2.setBackground(new java.awt.Color(255, 255, 255));
        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel2.setIcon(new javax.swing.ImageIcon("D:\\My Java Projects\\Hospital_Management_System\\Images\\3.jpg")); // NOI18N
        jLabel2.setToolTipText("");
        jLabel2.setHorizontalTextPosition(javax.swing.SwingConstants.RIGHT);
        jLabel2.setInheritsPopupMenu(false);
        jPanel1.add(jLabel2);
        jLabel2.setBounds(10, 10, 1120, 640);

        jLabel14.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel14.setText("Search User :");
        jPanel1.add(jLabel14);
        jLabel14.setBounds(40, 180, 140, 30);

        JTextfield_NIC_No.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        JTextfield_NIC_No.setForeground(new java.awt.Color(153, 153, 153));
        JTextfield_NIC_No.setText("search");
        JTextfield_NIC_No.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        JTextfield_NIC_No.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusGained(java.awt.event.FocusEvent evt) {
                JTextfield_NIC_NoFocusGained(evt);
            }
            public void focusLost(java.awt.event.FocusEvent evt) {
                JTextfield_NIC_NoFocusLost(evt);
            }
        });
        JTextfield_NIC_No.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                JTextfield_NIC_NoKeyPressed(evt);
            }
            public void keyTyped(java.awt.event.KeyEvent evt) {
                JTextfield_NIC_NoKeyTyped(evt);
            }
        });
        jPanel1.add(JTextfield_NIC_No);
        JTextfield_NIC_No.setBounds(180, 180, 260, 30);

        jLabel3_Search_icon.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel3_Search_icon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/hospital_management_system/Search-icon.png"))); // NOI18N
        jLabel3_Search_icon.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jLabel3_Search_icon.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jLabel3_Search_iconMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jLabel3_Search_iconMouseExited(evt);
            }
        });
        jPanel1.add(jLabel3_Search_icon);
        jLabel3_Search_icon.setBounds(442, 180, 32, 30);

        jLabel15.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel15.setForeground(new java.awt.Color(255, 0, 51));
        jLabel15.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel15.setText("V");
        jPanel1.add(jLabel15);
        jLabel15.setBounds(420, 180, 20, 30);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 1140, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, 657, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jTextField_FnameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_FnameKeyReleased

        jLabel_Val_FName.setText("");

    }//GEN-LAST:event_jTextField_FnameKeyReleased

    private void jPasswordField_PasswordKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jPasswordField_PasswordKeyReleased

        jLabel_Val_Password.setText("");

    }//GEN-LAST:event_jPasswordField_PasswordKeyReleased

    private void jPasswordField_Re_Type_PwKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jPasswordField_Re_Type_PwKeyReleased

        jLabel_Val_Retype_Psswd.setText("");

    }//GEN-LAST:event_jPasswordField_Re_Type_PwKeyReleased

    private void jTextField_NIC_NoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_NIC_NoKeyTyped

        char c = evt.getKeyChar();

        if (!(Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || c == KeyEvent.VK_DELETE || c == KeyEvent.VK_ENTER)) {

            evt.consume();

            getToolkit().beep();
            jLabel_Val_NIC_NO.setText("Please enter only numbers.");
        }

    }//GEN-LAST:event_jTextField_NIC_NoKeyTyped

    private void jTextField_U_NameKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_U_NameKeyReleased

        jLabel_Val_UName1.setText("");

    }//GEN-LAST:event_jTextField_U_NameKeyReleased

    private void jTextField_Phone_NumberKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_Phone_NumberKeyReleased

        jLabel_Val_Phone_Num.setText("");

    }//GEN-LAST:event_jTextField_Phone_NumberKeyReleased

    private void jComboBox_GenderKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox_GenderKeyReleased

        jLabel_Val_Gender.setText("");

    }//GEN-LAST:event_jComboBox_GenderKeyReleased

    private void jButton_Choose_ImgActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_Choose_ImgActionPerformed

        jLabel_Val_Picture.setText(null);
        jLabel_imge_update_form.setText(null);
        chooser = new JFileChooser();
        chooser.showOpenDialog(null);
        File f = chooser.getSelectedFile();
        filename = f.getAbsolutePath();
        ImageIcon imageicon = new ImageIcon(new ImageIcon(filename).getImage().getScaledInstance(jLabel_imge_update_form.getWidth(), jLabel_imge_update_form.getHeight(), Image.SCALE_SMOOTH));
        jLabel_imge_update_form.setIcon(imageicon);

        try {

            File Image = new File(filename);
            FileInputStream fis = new FileInputStream(Image);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            byte[] buf = new byte[1024];

            for (int readNum; (readNum = fis.read(buf)) != -1;) {
                bos.write(buf, 0, readNum);
            }

            Person_Image = bos.toByteArray();

        } catch (Exception ex) {

            Logger.getLogger(JFrame_19.class.getName()).log(Level.SEVERE, null, ex);
            ex.printStackTrace();
            getToolkit().beep();

            JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);
            this.dispose();

        }

    }//GEN-LAST:event_jButton_Choose_ImgActionPerformed

    private void jButton_ChangeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_ChangeActionPerformed

        if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

            getToolkit().beep();
            jLabel_Val_DOB.setText("Date Of Birth is empty.");
            jLabel_Val_FName.setText("Full Name is empty.");
            jLabel_Val_Gender.setText("Gender is not selected.");
            jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
            jLabel_Val_Password.setText("Password is empty.");
            jLabel_Val_Picture.setText("Picture is not set.");
            jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
            jLabel_Val_Phone_Num.setText("Phone number is empty.");
            jLabel_Val_UName1.setText("Username is empty.");

        }
        if (jTextField_NIC_No.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

        }
        if (jTextField_U_Name.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_UName1.setText("Username is empty.");

        }
        if (jPasswordField_Password.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_Password.setText("Password is empty.");

        }
        if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

        }
        if (jTextField_Phone_Number.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_Phone_Num.setText("Phone number is empty.");

        }
        if (jTextField_Fname.getText().trim().isEmpty()) {

            getToolkit().beep();
            jLabel_Val_FName.setText("Full Name is empty.");

        }
        if (jDateChooser_DOB.getDate() == null) {

            getToolkit().beep();
            jLabel_Val_DOB.setText("Date Of Birth is empty.");

        }
        if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

            getToolkit().beep();
            jLabel_Val_Gender.setText("Gender is not selected.");

        }
        if (jLabel_imge_update_form.getIcon() == null) {

            getToolkit().beep();
            jLabel_Val_Picture.setText("Picture is not set.");

        } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

            getToolkit().beep();
            JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

            jPasswordField_Password.setText(null);
            jPasswordField_Re_Type_Pw.setText(null);
            jLabel_Val_DOB.setText(null);
            jLabel_Val_FName.setText(null);
            jLabel_Val_Gender.setText(null);
            jLabel_Val_NIC_NO.setText(null);
            jLabel_Val_Password.setText(null);
            jLabel_Val_Picture.setText(null);
            jLabel_Val_Retype_Psswd.setText(null);
            jLabel_Val_Phone_Num.setText(null);
            jLabel_Val_UName1.setText(null);

            jPasswordField_Password.grabFocus();

        } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
            try {

                Class.forName("com.mysql.cj.jdbc.Driver");
                String url = "jdbc:mysql://localhost:3306/";
                String db = "hospital_management_system_database";
                String user = "root";
                String pword = "123456";

                Connection con = null;
                con = DriverManager.getConnection(url + db, user, pword);

                String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                PreparedStatement pst = con.prepareStatement(query);

                pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                pst.setString(1, jTextField_U_Name.getText());
                pst.setString(2, jPasswordField_Password.getText());
                pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                pst.setString(4, jTextField_Phone_Number.getText());
                pst.setString(5, jTextField_Fname.getText());

                SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                String date1 = sdf1.format(jDateChooser_DOB.getDate());
                pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                gender = jComboBox_Gender.getSelectedItem().toString();
                pst.setString(7, gender);

                // System.out.println("Valye "+chooser.getSelectedFile().toString());
                if (jLabel_imge_update_form.getIcon() == null) {
                    getToolkit().beep();
                    jLabel_Val_Picture.setText("Please select your profile image");
                } else {
                    // pst.setString(9, chooser.getSelectedFile().toString());
                    pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                    pst.executeUpdate();
                    con.close();

                    System.out.println(pst);
                    System.out.println("1 row affected");

                    Boolean result = saveImage(chooser);

                    if (result) {
                        JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                    } else {
                        JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                    }

                }

            } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                getToolkit().beep();

                JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

            }

            jTextField_Phone_Number.setText(null);
            jTextField_Fname.setText(null);
            jTextField_NIC_No.setText(null);
            jTextField_U_Name.setText(null);
            jPasswordField_Password.setText(null);
            jPasswordField_Re_Type_Pw.setText(null);
            jDateChooser_DOB.setDate(null);
            jLabel_imge_update_form.setIcon(null);
            jLabel_imge_update_form.setText("<<Add your image here>>");
            jComboBox_Gender.setSelectedItem("Select Gender");
            jTextField_U_Name.grabFocus();

        }

    }//GEN-LAST:event_jButton_ChangeActionPerformed

    private void jButton_CloseActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_CloseActionPerformed

        int a;
        getToolkit().beep();
        a = JOptionPane.showConfirmDialog(null, "Are you sure to extit the program?", "Close the program?", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);

        if (a == 0) {

            this.dispose();

        }
    }//GEN-LAST:event_jButton_CloseActionPerformed

    private void jButton_BackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_BackActionPerformed

        this.dispose();

    }//GEN-LAST:event_jButton_BackActionPerformed

    private void jButton_Clr1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton_Clr1ActionPerformed

        int a;
        getToolkit().beep();
        a = JOptionPane.showConfirmDialog(null, "Are you sure to you went to clear the data", "Clear Data", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);

        if (a == 0) {

            jLabel_Val_DOB.setText(null);
            jLabel_Val_FName.setText(null);
            jLabel_Val_Gender.setText(null);
            jLabel_Val_NIC_NO.setText(null);
            jLabel_Val_Password.setText(null);
            jLabel_Val_Picture.setText(null);
            jLabel_Val_Retype_Psswd.setText(null);
            jLabel_Val_UName1.setText(null);
            jLabel_Val_Phone_Num.setText(null);
            jTextField_Phone_Number.setText(null);
            jTextField_Fname.setText(null);
            jTextField_NIC_No.setText(null);
            jTextField_U_Name.setText(null);
            jPasswordField_Password.setText(null);
            jPasswordField_Re_Type_Pw.setText(null);
            jDateChooser_DOB.setDate(null);
            jLabel_imge_update_form.setIcon(null);
            jLabel_imge_update_form.setText("<<Add your image here>>");
            jComboBox_Gender.setSelectedItem("Select Gender");
            jTextField_NIC_No.grabFocus();

        }

    }//GEN-LAST:event_jButton_Clr1ActionPerformed

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened

        jLabel_imge_update_form.setText("<<Add your image here>>");

    }//GEN-LAST:event_formWindowOpened

    private void jLabel_Ico_SHOW_PasswordMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_PasswordMouseClicked

        if (jLabel_Show_Password_dont_Delete.getText().equals("")) {

            jPasswordField_Password.setEchoChar((char) 0);
            jLabel_Show_Password_dont_Delete.setText("set");

        } else {

            jPasswordField_Password.setEchoChar('*');
            jLabel_Show_Password_dont_Delete.setText("");

        }

    }//GEN-LAST:event_jLabel_Ico_SHOW_PasswordMouseClicked

    private void jLabel_Ico_SHOW_PasswordMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_PasswordMouseEntered

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, new Color(153, 153, 153));
        jLabel_Ico_SHOW_Password.setBorder(Lable__Border);
        jLabel_Ico_SHOW_Password.setForeground(new Color(153, 153, 153));

    }//GEN-LAST:event_jLabel_Ico_SHOW_PasswordMouseEntered

    private void jLabel_Ico_SHOW_PasswordMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_PasswordMouseExited

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.BLACK);
        jLabel_Ico_SHOW_Password.setBorder(Lable__Border);
        jLabel_Ico_SHOW_Password.setForeground(Color.WHITE);

    }//GEN-LAST:event_jLabel_Ico_SHOW_PasswordMouseExited

    private void jLabel_Ico_SHOW_Retype_PasswordMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_Retype_PasswordMouseClicked

        if (jLabel_Show_Password_dont_Delete.getText().equals("")) {

            jPasswordField_Re_Type_Pw.setEchoChar((char) 0);
            jLabel_Show_Password_dont_Delete.setText("set");

        } else {

            jPasswordField_Re_Type_Pw.setEchoChar('*');
            jLabel_Show_Password_dont_Delete.setText("");

        }

    }//GEN-LAST:event_jLabel_Ico_SHOW_Retype_PasswordMouseClicked

    private void jLabel_Ico_SHOW_Retype_PasswordMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_Retype_PasswordMouseEntered

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, new Color(153, 153, 153));
        jLabel_Ico_SHOW_Password.setBorder(Lable__Border);
        jLabel_Ico_SHOW_Password.setForeground(new Color(153, 153, 153));

    }//GEN-LAST:event_jLabel_Ico_SHOW_Retype_PasswordMouseEntered

    private void jLabel_Ico_SHOW_Retype_PasswordMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_Ico_SHOW_Retype_PasswordMouseExited

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.BLACK);
        jLabel_Ico_SHOW_Password.setBorder(Lable__Border);
        jLabel_Ico_SHOW_Password.setForeground(Color.WHITE);

    }//GEN-LAST:event_jLabel_Ico_SHOW_Retype_PasswordMouseExited

    private void jLabel_Val_PictureKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jLabel_Val_PictureKeyReleased

        jLabel_Val_Picture.setText("");

    }//GEN-LAST:event_jLabel_Val_PictureKeyReleased

    private void jLabel_Val_NIC_NOKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jLabel_Val_NIC_NOKeyReleased

        char c = evt.getKeyChar();

        if ((Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || c == KeyEvent.VK_DELETE || c == KeyEvent.VK_ENTER)) {

            evt.consume();
            jLabel_Val_NIC_NO.setText("");
        }

    }//GEN-LAST:event_jLabel_Val_NIC_NOKeyReleased

    private void jLabel_Val_UName1KeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jLabel_Val_UName1KeyReleased

        jLabel_Val_UName1.setText("");

    }//GEN-LAST:event_jLabel_Val_UName1KeyReleased

    private void jLabel_imge_update_formKeyReleased(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jLabel_imge_update_formKeyReleased

        jLabel_Val_Picture.setText("");

    }//GEN-LAST:event_jLabel_imge_update_formKeyReleased

    private void jLabel_MiniimizeMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_MiniimizeMouseClicked

        this.setState(JFrame_1.ICONIFIED);

    }//GEN-LAST:event_jLabel_MiniimizeMouseClicked

    private void jLabel_MiniimizeMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_MiniimizeMouseEntered

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.WHITE);
        jLabel_Miniimize.setBorder(Lable__Border);
        jLabel_Miniimize.setForeground(Color.WHITE);

    }//GEN-LAST:event_jLabel_MiniimizeMouseEntered

    private void jLabel_MiniimizeMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_MiniimizeMouseExited

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.black);
        jLabel_Miniimize.setBorder(Lable__Border);
        jLabel_Miniimize.setForeground(Color.BLACK);

    }//GEN-LAST:event_jLabel_MiniimizeMouseExited

    private void jLabel_CloseMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_CloseMouseClicked

        int a;
        getToolkit().beep();
        a = JOptionPane.showConfirmDialog(null, "Are you sure to extit the program?", "Close the program?", JOptionPane.YES_NO_OPTION, JOptionPane.QUESTION_MESSAGE);

        if (a == 0) {

            this.dispose();

        }

    }//GEN-LAST:event_jLabel_CloseMouseClicked

    private void jLabel_CloseMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_CloseMouseEntered

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.WHITE);
        jLabel_Close.setBorder(Lable__Border);
        jLabel_Close.setForeground(Color.WHITE);

    }//GEN-LAST:event_jLabel_CloseMouseEntered

    private void jLabel_CloseMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_CloseMouseExited

        Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.black);
        jLabel_Close.setBorder(Lable__Border);
        jLabel_Close.setForeground(Color.BLACK);

    }//GEN-LAST:event_jLabel_CloseMouseExited

    private void jLabel_imge_update_formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel_imge_update_formMouseClicked

        jLabel_Val_Picture.setText(null);
        jLabel_imge_update_form.setText(null);
        chooser = new JFileChooser();
        chooser.showOpenDialog(null);
        File f = chooser.getSelectedFile();
        filename = f.getAbsolutePath();
        ImageIcon imageicon = new ImageIcon(new ImageIcon(filename).getImage().getScaledInstance(jLabel_imge_update_form.getWidth(), jLabel_imge_update_form.getHeight(), Image.SCALE_SMOOTH));
        jLabel_imge_update_form.setIcon(imageicon);

        try {

            File Image = new File(filename);
            FileInputStream fis = new FileInputStream(Image);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            byte[] buf = new byte[1024];

            for (int readNum; (readNum = fis.read(buf)) != -1;) {
                bos.write(buf, 0, readNum);
            }

            Person_Image = bos.toByteArray();

        } catch (Exception ex) {

            Logger.getLogger(JFrame_19.class.getName()).log(Level.SEVERE, null, ex);
            ex.printStackTrace();
            getToolkit().beep();

            JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);
            this.dispose();

        }


    }//GEN-LAST:event_jLabel_imge_update_formMouseClicked

    private void jTextField_U_NameKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_U_NameKeyPressed

        jLabel_Val_UName1.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }

    }//GEN-LAST:event_jTextField_U_NameKeyPressed

    private void jPasswordField_PasswordKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jPasswordField_PasswordKeyPressed

        jLabel_Val_Password.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }


    }//GEN-LAST:event_jPasswordField_PasswordKeyPressed

    private void jPasswordField_Re_Type_PwKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jPasswordField_Re_Type_PwKeyPressed

        jLabel_Val_Retype_Psswd.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }


    }//GEN-LAST:event_jPasswordField_Re_Type_PwKeyPressed

    private void jTextField_Phone_NumberKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_Phone_NumberKeyPressed

        jLabel_Val_Phone_Num.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }


    }//GEN-LAST:event_jTextField_Phone_NumberKeyPressed

    private void jTextField_FnameKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_FnameKeyPressed

        jLabel_Val_FName.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }

    }//GEN-LAST:event_jTextField_FnameKeyPressed

    private void jComboBox_GenderKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jComboBox_GenderKeyPressed

        jLabel_Val_Gender.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

//            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }


    }//GEN-LAST:event_jComboBox_GenderKeyPressed

    private void jComboBox_GenderMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jComboBox_GenderMouseClicked

        jLabel_Val_Gender.setText(null);

    }//GEN-LAST:event_jComboBox_GenderMouseClicked

    private void JTextfield_NIC_NoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JTextfield_NIC_NoFocusGained

        //That is clear the text felds and show "username".
        String search = String.valueOf(JTextfield_NIC_No.getText());

        if (search.trim().toLowerCase().equals("search")) {

            JTextfield_NIC_No.setText(null);
            JTextfield_NIC_No.setForeground(Color.BLACK);

        }

    }//GEN-LAST:event_JTextfield_NIC_NoFocusGained

    private void JTextfield_NIC_NoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JTextfield_NIC_NoFocusLost

        String src = String.valueOf(JTextfield_NIC_No.getText());

        if (src.trim().equals("") || JTextfield_NIC_No.getText().trim().toLowerCase().equals("search")) {

            JTextfield_NIC_No.setText("search");
            JTextfield_NIC_No.setForeground(new Color(153, 153, 153));//me code eken apita kamthi patak add karanna puluwan
        }
    }//GEN-LAST:event_JTextfield_NIC_NoFocusLost

    private void JTextfield_NIC_NoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_JTextfield_NIC_NoKeyPressed

        JLabel_Search_Status_text.setText(null);
    }//GEN-LAST:event_JTextfield_NIC_NoKeyPressed

    private void JTextfield_NIC_NoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_JTextfield_NIC_NoKeyTyped

        char c = evt.getKeyChar();

        if (!(Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || c == KeyEvent.VK_DELETE)) {

            //  JLabel_Status_text.setText("You can enter the numberes only.");
            evt.consume();
            getToolkit().beep();
        }
    }//GEN-LAST:event_JTextfield_NIC_NoKeyTyped

    private void jLabel3_Search_iconMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel3_Search_iconMouseEntered

        /*Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.white);
        jLabel3_Search_icon.setBorder(Lable__Border);
        jLabel3_Search_icon.setForeground(Color.WHITE);*/
    }//GEN-LAST:event_jLabel3_Search_iconMouseEntered

    private void jLabel3_Search_iconMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel3_Search_iconMouseExited

        /*  Border Lable__Border = BorderFactory.createMatteBorder(1, 1, 1, 1, Color.black);
        jLabel3_Search_icon.setBorder(Lable__Border);
        jLabel3_Search_icon.setForeground(Color.BLACK);*/
    }//GEN-LAST:event_jLabel3_Search_iconMouseExited

    private void JTextfield_Search_NIC_NoFocusGained(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JTextfield_Search_NIC_NoFocusGained

        //That is clear the text felds and show "username".
        String search = String.valueOf(JTextfield_Search_NIC_No.getText());

        if (search.trim().toLowerCase().equals("search")) {

            JTextfield_Search_NIC_No.setText(null);
            JTextfield_Search_NIC_No.setForeground(Color.BLACK);

        }


    }//GEN-LAST:event_JTextfield_Search_NIC_NoFocusGained

    private void JTextfield_Search_NIC_NoFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_JTextfield_Search_NIC_NoFocusLost

        String src = String.valueOf(JTextfield_Search_NIC_No.getText());

        if (src.trim().equals("") || JTextfield_Search_NIC_No.getText().trim().toLowerCase().equals("search")) {

            JTextfield_Search_NIC_No.setText("search");
            JTextfield_Search_NIC_No.setForeground(new Color(153, 153, 153));//me code eken apita kamthi patak add karanna puluwan
        }


    }//GEN-LAST:event_JTextfield_Search_NIC_NoFocusLost

    private void JTextfield_Search_NIC_NoKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_JTextfield_Search_NIC_NoKeyTyped

        char c = evt.getKeyChar();

        if (!(Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || c == KeyEvent.VK_DELETE)) {

            evt.consume();

            JLabel_Search_Status_text.setText("Please enter only numbers.");
            getToolkit().beep();

        }
    }//GEN-LAST:event_JTextfield_Search_NIC_NoKeyTyped

    private void jLabel3_Search_icon1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jLabel3_Search_icon1MouseClicked

        JLabel_Search_Status_text.setText(null);

        if (JTextfield_Search_NIC_No.getText().trim().isEmpty()) {

            getToolkit().beep();

            JLabel_Search_Status_text.setText("Please enter NIC number.");
            // JOptionPane.showMessageDialog(null, "You should enter the Patient_ID before Search data.", "Warnimg!!!", JOptionPane.WARNING_MESSAGE);

        } else {

            try {

                String url = "jdbc:mysql://localhost:3306/";
                String db = "hospital_management_system_database";
                String user = "root";
                String pword = "123456";

                System.out.println(JTextfield_Search_NIC_No.getText());
                Connection con = null;
                Class.forName("com.mysql.cj.jdbc.Driver").newInstance();
                con = DriverManager.getConnection(url + db, user, pword);

                String sql = "SELECT * FROM useres WHERE NIC_No = ?";

                PreparedStatement pst = con.prepareStatement(sql);
                pst.setString(1, JTextfield_Search_NIC_No.getText());

                ResultSet res = pst.executeQuery();
                System.out.println(sql);

                if (res.next()) {

                    String c1 = res.getString("NIC_No");
                    jTextField_NIC_No.setText(c1);

                    String c2 = res.getString("Usename");
                    jTextField_U_Name.setText(c2);

                    String c3 = res.getString("Password");
                    jPasswordField_Password.setText(c3);

                    String c4 = res.getString("Re_Enter_Password");
                    jPasswordField_Re_Type_Pw.setText(c4);

                    String c5 = res.getString("phone_number");
                    jTextField_Phone_Number.setText(c5);

                    String c6 = res.getString("Full_name");
                    jTextField_Fname.setText(c6);

                    Date c7 = res.getDate("Date_Of_Birth");
                    jDateChooser_DOB.setDate(c7);

                    String c8 = res.getString("Gender");
                    jComboBox_Gender.setSelectedItem(c8);

                    //search image code
                    String c9 = res.getString("image_path");

                    ImageIcon image = new ImageIcon(c9);
                    image = new ImageIcon(image.getImage().getScaledInstance(300, 270, BufferedImage.SCALE_SMOOTH));
                    jLabel_imge_update_form.setIcon(image);  // where jLabel2 is your label

                    System.out.println(res.getString("NIC_No") + " " + res.getString("Usename") + " " + res.getString("Password"));
                    System.out.println("Row Affected");

                }

                con.close();

            } catch (ClassNotFoundException | IllegalAccessException | InstantiationException | SQLException ex) {

                Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                getToolkit().beep();

                JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }

        }

    }//GEN-LAST:event_jLabel3_Search_icon1MouseClicked

    private void jTextField_NIC_NoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jTextField_NIC_NoKeyPressed

        jLabel_Val_NIC_NO.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

                //JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }
    }//GEN-LAST:event_jTextField_NIC_NoKeyPressed

    private void JTextfield_Search_NIC_NoKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_JTextfield_Search_NIC_NoKeyPressed

        JLabel_Search_Status_text.setText(null);

    }//GEN-LAST:event_JTextfield_Search_NIC_NoKeyPressed

    private void jDateChooser_DOBKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_jDateChooser_DOBKeyPressed

        jLabel_Val_DOB.setText(null);

        if (evt.getKeyCode() == KeyEvent.VK_ENTER) {

            if (jTextField_Phone_Number.getText().trim().isEmpty() && jTextField_Fname.getText().trim().isEmpty() && jTextField_NIC_No.getText().trim().isEmpty() && jTextField_U_Name.getText().trim().isEmpty() && jPasswordField_Password.getText().trim().isEmpty() && jPasswordField_Re_Type_Pw.getText().trim().isEmpty() && jLabel_imge_update_form.getIcon() == null && jDateChooser_DOB.getDate() == null && jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");
                jLabel_Val_FName.setText("Full Name is empty.");
                jLabel_Val_Gender.setText("Gender is not selected.");
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");
                jLabel_Val_Password.setText("Password is empty.");
                jLabel_Val_Picture.setText("Picture is not set.");
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");
                jLabel_Val_Phone_Num.setText("Phone number is empty.");
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jTextField_NIC_No.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_NIC_NO.setText("N.I.C Number is empty.");

            }
            if (jTextField_U_Name.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_UName1.setText("Username is empty.");

            }
            if (jPasswordField_Password.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Password.setText("Password is empty.");

            }
            if (jPasswordField_Re_Type_Pw.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Retype_Psswd.setText("Re-Typed password is empty.");

            }
            if (jTextField_Phone_Number.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_Phone_Num.setText("Phone number is empty.");

            }
            if (jTextField_Fname.getText().trim().isEmpty()) {

                getToolkit().beep();
                jLabel_Val_FName.setText("Full Name is empty.");

            }
            if (jDateChooser_DOB.getDate() == null) {

                getToolkit().beep();
                jLabel_Val_DOB.setText("Date Of Birth is empty.");

            }
            if (jComboBox_Gender.getSelectedItem() == "Select Gender") {

                getToolkit().beep();
                jLabel_Val_Gender.setText("Gender is not selected.");

            }
            if (jLabel_imge_update_form.getIcon() == null) {

                getToolkit().beep();
                jLabel_Val_Picture.setText("Picture is not set.");

            } else if (!jPasswordField_Password.getText().equals(jPasswordField_Re_Type_Pw.getText())) {

                getToolkit().beep();
                JOptionPane.showMessageDialog(null, "Password is not matched", "Warning", JOptionPane.WARNING_MESSAGE);

                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jLabel_Val_DOB.setText(null);
                jLabel_Val_FName.setText(null);
                jLabel_Val_Gender.setText(null);
                jLabel_Val_NIC_NO.setText(null);
                jLabel_Val_Password.setText(null);
                jLabel_Val_Picture.setText(null);
                jLabel_Val_Retype_Psswd.setText(null);
                jLabel_Val_Phone_Num.setText(null);
                jLabel_Val_UName1.setText(null);

                jPasswordField_Password.grabFocus();

            } else {

                //            JOptionPane.showMessageDialog(null, "Password is matched");
                try {

                    Class.forName("com.mysql.cj.jdbc.Driver");
                    String url = "jdbc:mysql://localhost:3306/";
                    String db = "hospital_management_system_database";
                    String user = "root";
                    String pword = "123456";

                    Connection con = null;
                    con = DriverManager.getConnection(url + db, user, pword);

                    String query = "UPDATE useres SET Usename=? ,Password=? ,Re_Enter_Password=? ,phone_number=? ,Full_name=? ,Date_Of_Birth=? ,Gender=? ,image_path=? WHERE NIC_No=?";//query wka ewnass wenawa ekinekata

                    PreparedStatement pst = con.prepareStatement(query);

                    pst.setString(9, jTextField_NIC_No.getText());//query eke adala feild eka yedi athi place eke number eka merhanadi parameeeter eka lesa yediya yuthuya.
                    pst.setString(1, jTextField_U_Name.getText());
                    pst.setString(2, jPasswordField_Password.getText());
                    pst.setString(3, jPasswordField_Re_Type_Pw.getText());
                    pst.setString(4, jTextField_Phone_Number.getText());
                    pst.setString(5, jTextField_Fname.getText());

                    SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd");
                    String date1 = sdf1.format(jDateChooser_DOB.getDate());
                    pst.setString(6, date1);//Date Chhoser eken date ekaa add kirima

                    String gender;  // Combo Box ekaka data `db ekata connect karana hati.
                    gender = jComboBox_Gender.getSelectedItem().toString();
                    pst.setString(7, gender);

                    // System.out.println("Valye "+chooser.getSelectedFile().toString());
                    if (jLabel_imge_update_form.getIcon() == null) {
                        getToolkit().beep();
                        jLabel_Val_Picture.setText("Please select your profile image");
                    } else {
                        // pst.setString(9, chooser.getSelectedFile().toString());
                        pst.setString(8, myLocation + chooser.getSelectedFile().getName());

                        pst.executeUpdate();
                        con.close();

                        System.out.println(pst);
                        System.out.println("1 row affected");

                        Boolean result = saveImage(chooser);

                        if (result) {
                            JOptionPane.showMessageDialog(null, "Records change succsessfully.", "Update succsessfully your account", JOptionPane.INFORMATION_MESSAGE);
                        } else {
                            JOptionPane.showMessageDialog(null, "Record change unsuccsesfully.", "Update unsuccsessfully your account", JOptionPane.ERROR_MESSAGE);
                        }

                    }

                } catch (HeadlessException | ClassNotFoundException | SQLException ex) {

                    Logger.getLogger(JFrame_22.class.getName()).log(Level.SEVERE, null, ex);
                    getToolkit().beep();

                    JOptionPane.showMessageDialog(null, ex, "Error!", JOptionPane.ERROR_MESSAGE);

                }

                jTextField_Phone_Number.setText(null);
                jTextField_Fname.setText(null);
                jTextField_NIC_No.setText(null);
                jTextField_U_Name.setText(null);
                jPasswordField_Password.setText(null);
                jPasswordField_Re_Type_Pw.setText(null);
                jDateChooser_DOB.setDate(null);
                jLabel_imge_update_form.setIcon(null);
                jLabel_imge_update_form.setText("<<Add your image here>>");
                jComboBox_Gender.setSelectedItem("Select Gender");
                jTextField_U_Name.grabFocus();

            }
        }
    }//GEN-LAST:event_jDateChooser_DOBKeyPressed

    private void jDateChooser_DOBMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jDateChooser_DOBMouseClicked

        jLabel_Val_DOB.setText(null);
        
    }//GEN-LAST:event_jDateChooser_DOBMouseClicked

    public Boolean saveImage(JFileChooser fc) {

        File selected = null;
        Boolean bool = false;
        //  JFileChooser fc = new JFileChooser(System.getProperty("user.home"));
        // String location = "E:\\My Java Projects\\Hospital_Management_System\\src\\hospital_management_system\\User_Image";

        fc.addChoosableFileFilter(new FileNameExtensionFilter("Image files",
                new String[]{"png", "jpg", "jpeg", "gif"}));
        //   if (fc.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
        try {
            Image image = ImageIO.read(fc.getSelectedFile());
            if (image != null) {
                JPanel panel = new JPanel(new BorderLayout(10, 10));
                panel.add(new JLabel(fc.getSelectedFile().toString()),
                        BorderLayout.NORTH);
                panel.add(new JLabel(new ImageIcon(image)));
                //   JOptionPane.showMessageDialog(frame, panel);

                selected = fc.getSelectedFile();

                // textField.setText(selected.getName());
                // textField_1.setText(selected.length());
                //  BufferedImage bImage = null;
                File initialImage = fc.getSelectedFile();
                BufferedImage bImage = ImageIO.read(initialImage);

                File file = fc.getSelectedFile();
                System.out.println(fc.getSelectedFile().toString());
                System.out.println(file.getAbsolutePath());
                System.out.println(selected.getName());

                // ImageIO.write((BufferedImage) bImage, "jpg", new File(file.getAbsolutePath()));
                ImageIO.write((BufferedImage) bImage, "jpg", new File(myLocation + "" + selected.getName()));
                // ImageIO.write((BufferedImage) bImage, "png", new File(location));
                // ImageIO.write((BufferedImage) bImage, "png", fc.getSelectedFile());

                bool = true;

            }
        } catch (Exception ex) {

            ex.printStackTrace();
            bool = false;
        }
        // }
        return bool;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(JFrame_22.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(JFrame_22.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(JFrame_22.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(JFrame_22.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new JFrame_22().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    public static javax.swing.JLabel JLabel_Search_Status_text;
    public static javax.swing.JTextField JTextfield_NIC_No;
    public static javax.swing.JTextField JTextfield_Search_NIC_No;
    private javax.swing.JButton jButton_Back;
    private javax.swing.JButton jButton_Change;
    private javax.swing.JButton jButton_Choose_Img;
    private javax.swing.JButton jButton_Close;
    private javax.swing.JButton jButton_Clr1;
    private javax.swing.JComboBox<String> jComboBox_Gender;
    private com.toedter.calendar.JDateChooser jDateChooser_DOB;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel1_Time;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3_Search_icon;
    private javax.swing.JLabel jLabel3_Search_icon1;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JLabel jLabel_Close;
    private javax.swing.JLabel jLabel_Date;
    private javax.swing.JLabel jLabel_Ico_SHOW_Password;
    private javax.swing.JLabel jLabel_Ico_SHOW_Retype_Password;
    private javax.swing.JLabel jLabel_Miniimize;
    private javax.swing.JLabel jLabel_Show_Password_dont_Delete;
    private javax.swing.JLabel jLabel_Val_DOB;
    private javax.swing.JLabel jLabel_Val_FName;
    private javax.swing.JLabel jLabel_Val_Gender;
    private javax.swing.JLabel jLabel_Val_NIC_NO;
    private javax.swing.JLabel jLabel_Val_Password;
    private javax.swing.JLabel jLabel_Val_Phone_Num;
    private javax.swing.JLabel jLabel_Val_Picture;
    private javax.swing.JLabel jLabel_Val_Retype_Psswd;
    private javax.swing.JLabel jLabel_Val_UName1;
    public javax.swing.JLabel jLabel_imge_update_form;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPasswordField jPasswordField_Password;
    private javax.swing.JPasswordField jPasswordField_Re_Type_Pw;
    private javax.swing.JTextField jTextField_Fname;
    private static javax.swing.JTextField jTextField_NIC_No;
    private javax.swing.JTextField jTextField_Phone_Number;
    private javax.swing.JTextField jTextField_U_Name;
    // End of variables declaration//GEN-END:variables
}
